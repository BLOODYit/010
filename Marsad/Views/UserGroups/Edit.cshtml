@model UserGroupViewModel

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    List<string> Dumyclaims = new List<string>();

    Dumyclaims.Add("Can add");
    Dumyclaims.Add("Can Edit");
    Dumyclaims.Add("Can Delet");

}

<div class="container">
<div class="row">
<div class="col-xs-12">
@using (Html.BeginForm())
{
   //@Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h2>تعديل مجموعةالمستخدمين</h2>
        <hr />
        @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })*@
        @Html.HiddenFor(model => model.UserGroup.ID)
        @Html.HiddenFor(model => model.SelectedClaims, new { id = "SelectedClaims" });
        <div class="form-group">
            <div class="col-sm-10 col-xs-12">
                @Html.LabelFor(model => model.UserGroup.Name, new { @class = "control-label col-sm-2 col-xs-12" })
                @Html.TextBoxFor(model => model.UserGroup.Name, new { @class = "form-control", id="userGroupNameEdit",placeholder="ادخل اسم المجموعة"})
                @*<input type="text" class="form-control" id="userGroupNameEdit" value="@Model.UserGroup.Name" placeholder="ادخل اسم المجموعة" x="@Model.UserGroup.ID" />*@

                @*@Html.ValidationMessageFor(model => model.UserGroup.Name, "ادخل اسم المجموعة", new { @class = "text-danger" })*@
                @foreach (var item in Dumyclaims)
                {

                    <div class="checkbox">
                        <label>
                            <input class="alignleft"
                                   type="checkbox"
                                   id=`checkbox_@Dumyclaims.IndexOf(item)`
                                   name="Role"
                                   value="@item"
                                   @if(Model.SelectedClaims.Contains(item))
                                   {
                                        <text> checked </text>
                                   }
                                    /> @item


                        </label>
                    </div>

        }
                @*@Html.ValidationMessageFor(model => model.SelectedClaims, "اختر نوع على الاقل", new { @class = "text-danger" })*@

            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-sm-10 col-xs-12">
                <input id="btnSubmitUGEdit" type="submit" value="حفظ" class="btn btn-primary"  />
				@*@Html.ActionLink("الرئيسية", "Index",null ,new {@class="btn btn-default"})*@
            </div>
        </div>
    </div>
}

    

</div>
</div>
</div>

@section scripts{
    <script>
        //$("#userGroupNameEdit").keyup(function () {
             
        //       if ($("#userGroupNameEdit").val() != "") {
        //           $("#btnSubmitUGEdit").prop('disabled', false);
        //           $("#btnSubmitUGEdit").removeClass("disabled");
        //    }
        //    else {
        //           $("#btnSubmitUGEdit").prop('disabled', true);
        //           $("#btnSubmitUGEdit").addClass("disabled");
        //    }
        //});

        $("#btnSubmitUGEdit").click(function () {
            var sList = [];
                $('input[type=checkbox]').each(function () {
                    if (this.checked) {
                        sList.push(this.value);
                    }
                });
            $("#SelectedClaims").val(sList);

            //let Roles=[];
            //var UG = new Object();
            //let CC = [];
            //UG.Id = $("#userGroupNameEdit").attr("x")
            //UG.Name = $('#userGroupNameEdit').val();
            //$.each($("input[name='Role']:checked"), function () {
            //    Roles.push($(this).val());
            //});
            //for (let i = 0;i<Roles.length ;i++){
            //    let c = {
            //              "Key": i,
            //               "Name": Roles[i],
            //    }
            //    CC.push(c);

            //}
            //UG.Claims = CC;
            //$.ajax({
            //    type: "POST",
            //    url: "/UserGroups/Edit",
            //    data: UG,


            //    success: function (response) {
            //        window.location.href = response.redirectToUrl;
            //        console.log(window.location.href = response.redirectToUrl);
            //    },
            //    error: function (response) {
            //        console(response.responseText);
            //    }
            //});




        });
        

    </script>
}
