@model Marsad.Models.DataSource
@using Marsad.Models.Controls
@{
    ViewBag.Title = "إنشاء مصدر بيانات";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="row">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                <h4>إنشاء مصدر بيانات</h4>
                <hr />

                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    @Html.LabelFor(model => model.Code, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        <input disabled class="form-control" value="يتم إعطاء القيمة بشكل آلي عند حفظ السجل" />
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.PublishDate, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-7 col-xs-12">
                        @Html.EditorFor(model => model.PublishDate, new { htmlAttributes = new { @class = "form-control", @type = "date" } })
                        @Html.ValidationMessageFor(model => model.PublishDate, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-sm-3 col-xs-12">
                        @Html.RadioButtonFor(model => model.IsHijri, false, new { @checked = "checked" }) <span>ميلادي</span>
                        @Html.RadioButtonFor(model => model.IsHijri, true) <span>هجري</span>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.DataSourceTypeID, null, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        @Html.DropDownList("DataSourceTypeID", null, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.DataSourceTypeID, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.PublishNumber, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        @Html.EditorFor(model => model.PublishNumber, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.PublishNumber, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.PublisherName, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        @Html.EditorFor(model => model.PublisherName, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.PublisherName, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.AuthorName, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        @Html.EditorFor(model => model.AuthorName, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.AuthorName, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.PeriodID, null, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-7 col-xs-12">
                        @Html.DropDownList("PeriodID", null, htmlAttributes: new { @class = "form-control", @id = "PeriodID" })
                        @Html.ValidationMessageFor(model => model.PeriodID, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-sm-3 col-xs-12">
                        @Html.EditorFor(model => model.NoPeriod, null, new { @id = "NoPeriod" }) غير دوري
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.EntityID, null, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-7 col-xs-12">
                        @Html.DropDownList("EntityID", null, htmlAttributes: new { @class = "form-control", @id = "EntityID" })
                        @Html.ValidationMessageFor(model => model.EntityID, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-sm-3 col-xs-12">
                        @Html.EditorFor(model => model.NoEntity, null, new { @id = "NoEntity" }) بدون جهة
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.IsPart, htmlAttributes: new { @class = "control-label col-sm-2 col-xs-12" })
                    <div class="col-sm-10 col-xs-12">
                        <div class="checkbox">
                            @Html.RadioButtonFor(model => model.IsPart, false, new { @checked = "checked" }) <span>عدد جديد</span>
                            @Html.RadioButtonFor(model => model.IsPart, true) <span>جزء</span>
                        </div>
                    </div>
                </div>


                <div class="form-group">
                    <label class="col-sm-2 col-xs-12">مجموعات المصدر</label>
                    <div class="col-sm-10 col-xs-12">
                        @Html.Partial("~/Views/Shared/Controls/_MultiSelect.cshtml", new MultiSelectModel() { ID = "dataSourceGroupIds", Data = ViewBag.DataSourceGroups, Title = "", Name = "dataSourceGroupIds", Selected = ViewBag.dataSourceGroupIds })
                    </div>
                </div>



                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10 col-xs-12">
                        <input type="submit" value="إنشاء" class="btn btn-success" />
                        @Html.ActionLink("الرئيسية", "Index", null, new { @class = "btn btn-default" })
                    </div>
                </div>
            </div>
        }

    </div>
</div>

@section Scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#NoPeriod').change(function () {
                if ($(this).prop('checked')) {
                    $('#PeriodID').attr('disabled', 'disabled');
                }
                else {
                    $('#PeriodID').attr('disabled', false);
                }
            });

            $('#NoEntity').change(function () {
                if ($(this).prop('checked')) {
                    $('#EntityID').attr('disabled', 'disabled');
                }
                else {
                    $('#EntityID').attr('disabled', false);
                }
            });
        });
    </script>
}